import { jsPDF } from 'jspdf';
import { font } from './resources/fonts/DMSans_18pt-Regular-normal';

const DateConverter = (dateString: any) => {
  // Create a Date object from the input string
  const date = new Date(dateString);

  // Define options for formatting the date
  const options: Intl.DateTimeFormatOptions = {
    year: 'numeric',
    month: 'short',
    day: 'numeric',
    hour: 'numeric',
    minute: 'numeric',
    timeZoneName: 'short',
  };

  // Convert the date to the desired format
  const formattedDate = new Intl.DateTimeFormat('en-GB', options).format(date);

  return formattedDate;
};

export const GeneratePDF = async (props: {
  title: string;
  details: {
    author: string;
    requested: string;
    recipient: string; // sample: "Willie Simmons\nIBM\nManaging Director\nwillie@email.com\n(302) 555-0107"
    answered: string;
  };
  credentials: any;
}) => {
  const doc = new jsPDF({
    format: 'a4',
    unit: 'px',
  });

  // Function to fetch DM Sans font from Google Fonts
  // const fetchFont = async (url: string) => {
  //     const response = await fetch(url);
  //     const fontBlob = await response.arrayBuffer();
  //     const fontBase64 = btoa(
  //         String.fromCharCode(...new Uint8Array(fontBlob))
  //     );
  //     return fontBase64;
  // };
  // const fontUrl =
  //     "https://fonts.gstatic.com/s/dmsans/v10/rP2Hp2ywxg089UriAWCrCw.ttf";
  // const dmSansFont = await fetchFont(fontUrl);

  // Register DM Sans font
  // doc.addFileToVFS(
  //     "./resources/DM Sans/static/DMSans_18pt-Black.ttf",
  //     dmSansFont
  // );
  // doc.addFont(
  //     "./resources/DM Sans/static/DMSans_18pt-Black.ttf",
  //     "DMSans",
  //     "normal"
  // );
  // doc.setFont("DMSans");

  doc.addFileToVFS('DM_sans.ttf', font);
  doc.addFont('DM_sans.ttf', 'DM_sans', 'normal');
  doc.setFont('DM_sans');

  // Header
  const gray = '#F9FAFF';
  doc.setFillColor(gray);
  doc.rect(0, 0, 595, 50, 'F');
  doc.setFontSize(20);
  doc.setTextColor('#000000');
  doc.text(props.title, 20, 30);

  // Add logo
  const logoUrl = `data:image/png;base64,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`;
  // "data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTExIiBoZWlnaHQ9IjM4IiB2aWV3Qm94PSIwIDAgMTExIDM4IiBmaWxsPSJub25lIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPg0KPHBhdGggZD0iTTQyLjg2MjkgMTMuNzA3QzQzLjg5MDEgMTMuNzA3IDQ0LjgyMTQgMTMuOTQ2NyA0NS42NTY4IDE0LjQyNjFDNDYuNTA2IDE0Ljg5MTcgNDcuMTcwMiAxNS41NTU5IDQ3LjY0OTYgMTYuNDE4OEM0OC4xMjg5IDE3LjI2NzkgNDguMzY4NiAxOC4yNjA4IDQ4LjM2ODYgMTkuMzk3NkM0OC4zNjg2IDIwLjUzNDMgNDguMTI4OSAyMS41MzQxIDQ3LjY0OTYgMjIuMzk2OUM0Ny4xNzAyIDIzLjI0NjEgNDYuNTA2IDIzLjkxMDMgNDUuNjU2OCAyNC4zODk3QzQ0LjgyMTQgMjQuODU1MyA0My44OTAxIDI1LjA4ODEgNDIuODYyOSAyNS4wODgxQzQxLjQ1MjMgMjUuMDg4MSA0MC4zNDI5IDI0LjY0MyAzOS41MzQ5IDIzLjc1MjhWMjguOTA5MkgzNi4zMzAxVjEzLjg3MTRIMzkuMzkxMVYxNS4xNDUxQzQwLjE4NTQgMTQuMTg2NCA0MS4zNDI3IDEzLjcwNyA0Mi44NjI5IDEzLjcwN1pNNDIuMzA4MiAyMi40NTg2QzQzLjEzIDIyLjQ1ODYgNDMuODAxMSAyMi4xODQ3IDQ0LjMyMTUgMjEuNjM2OEM0NC44NTU2IDIxLjA3NTMgNDUuMTIyNyAyMC4zMjg5IDQ1LjEyMjcgMTkuMzk3NkM0NS4xMjI3IDE4LjQ2NjMgNDQuODU1NiAxNy43MjY3IDQ0LjMyMTUgMTcuMTc4OUM0My44MDExIDE2LjYxNzQgNDMuMTMgMTYuMzM2NiA0Mi4zMDgyIDE2LjMzNjZDNDEuNDg2NSAxNi4zMzY2IDQwLjgwODYgMTYuNjE3NCA0MC4yNzQ0IDE3LjE3ODlDMzkuNzU0IDE3LjcyNjcgMzkuNDkzOCAxOC40NjYzIDM5LjQ5MzggMTkuMzk3NkMzOS40OTM4IDIwLjMyODkgMzkuNzU0IDIxLjA3NTMgNDAuMjc0NCAyMS42MzY4QzQwLjgwODYgMjIuMTg0NyA0MS40ODY1IDIyLjQ1ODYgNDIuMzA4MiAyMi40NTg2WiIgZmlsbD0iIzFFMUYyNCIvPg0KPHBhdGggZD0iTTUzLjU1ODcgMTMuNzA3QzU1LjI3MDcgMTMuNzA3IDU2LjU4NTUgMTQuMTE3OSA1Ny41MDMxIDE0LjkzOTZDNTguNDIwNyAxNS43NDc3IDU4Ljg3OTUgMTYuOTczNSA1OC44Nzk1IDE4LjYxNjlWMjQuOTIzOEg1NS44ODAxVjIzLjU0NzRDNTUuMjc3NSAyNC41NzQ2IDU0LjE1NDUgMjUuMDg4MSA1Mi41MTEgMjUuMDg4MUM1MS42NjE5IDI1LjA4ODEgNTAuOTIyMyAyNC45NDQzIDUwLjI5MjMgMjQuNjU2N0M0OS42NzYgMjQuMzY5MSA0OS4yMDM1IDIzLjk3MTkgNDguODc0OCAyMy40NjUyQzQ4LjU0NjEgMjIuOTU4NSA0OC4zODE3IDIyLjM4MzIgNDguMzgxNyAyMS43Mzk1QzQ4LjM4MTcgMjAuNzEyNCA0OC43NjUyIDE5LjkwNDMgNDkuNTMyMiAxOS4zMTU0QzUwLjMxMjggMTguNzI2NSA1MS41MTEyIDE4LjQzMiA1My4xMjczIDE4LjQzMkg1NS42NzQ3QzU1LjY3NDcgMTcuNzMzNiA1NS40NjI0IDE3LjE5OTQgNTUuMDM3OCAxNi44Mjk2QzU0LjYxMzMgMTYuNDQ2MiA1My45NzY0IDE2LjI1NDQgNTMuMTI3MyAxNi4yNTQ0QzUyLjUzODQgMTYuMjU0NCA1MS45NTYzIDE2LjM1MDMgNTEuMzgxMSAxNi41NDJDNTAuODE5NiAxNi43MjAxIDUwLjM0MDIgMTYuOTY2NiA0OS45NDMgMTcuMjgxNkw0OC43OTI2IDE1LjA0MjRDNDkuMzk1MiAxNC42MTc4IDUwLjExNDIgMTQuMjg5MSA1MC45NDk3IDE0LjA1NjNDNTEuNzk4OCAxMy44MjM0IDUyLjY2ODUgMTMuNzA3IDUzLjU1ODcgMTMuNzA3Wk01My4zMTIyIDIyLjkzMTFDNTMuODYgMjIuOTMxMSA1NC4zNDYyIDIyLjgwNzggNTQuNzcwOCAyMi41NjEzQzU1LjE5NTMgMjIuMzAxMSA1NS40OTY2IDIxLjkyNDQgNTUuNjc0NyAyMS40MzE0VjIwLjMwMTVINTMuNDc2NUM1Mi4xNjE3IDIwLjMwMTUgNTEuNTA0NCAyMC43MzI5IDUxLjUwNDQgMjEuNTk1N0M1MS41MDQ0IDIyLjAwNjYgNTEuNjYxOSAyMi4zMzUzIDUxLjk3NjkgMjIuNTgxOEM1Mi4zMDU2IDIyLjgxNDcgNTIuNzUwNyAyMi45MzExIDUzLjMxMjIgMjIuOTMxMVoiIGZpbGw9IiMxRTFGMjQiLz4NCjxwYXRoIGQ9Ik02NC4yNjU3IDI1LjA4ODFDNjMuMzQ4MSAyNS4wODgxIDYyLjQ1MTEgMjQuOTc4NiA2MS41NzQ1IDI0Ljc1OTRDNjAuNjk4IDI0LjUyNjYgNTkuOTk5NSAyNC4yMzkgNTkuNDc5MSAyMy44OTY2TDYwLjU0NzQgMjEuNTk1N0M2MS4wNDA0IDIxLjkxMDcgNjEuNjM2MiAyMi4xNzEgNjIuMzM0NiAyMi4zNzY0QzYzLjAzMzEgMjIuNTY4MSA2My43MTc5IDIyLjY2NCA2NC4zODkgMjIuNjY0QzY1Ljc0NDkgMjIuNjY0IDY2LjQyMjggMjIuMzI4NSA2Ni40MjI4IDIxLjY1NzRDNjYuNDIyOCAyMS4zNDI0IDY2LjIzNzkgMjEuMTE2NCA2NS44NjgxIDIwLjk3OTRDNjUuNDk4MyAyMC44NDI1IDY0LjkzIDIwLjcyNjEgNjQuMTYzIDIwLjYzMDJDNjMuMjU5MSAyMC40OTMyIDYyLjUxMjcgMjAuMzM1NyA2MS45MjM4IDIwLjE1NzdDNjEuMzM0OSAxOS45Nzk3IDYwLjgyMTMgMTkuNjY0NyA2MC4zODMgMTkuMjEyN0M1OS45NTg0IDE4Ljc2MDcgNTkuNzQ2MiAxOC4xMTcgNTkuNzQ2MiAxNy4yODE2QzU5Ljc0NjIgMTYuNTgzMSA1OS45NDQ3IDE1Ljk2NjggNjAuMzQxOSAxNS40MzI3QzYwLjc1MjggMTQuODg0OSA2MS4zNDE3IDE0LjQ2MDMgNjIuMTA4NyAxNC4xNTlDNjIuODg5MyAxMy44NTc3IDYzLjgwNjkgMTMuNzA3IDY0Ljg2MTUgMTMuNzA3QzY1LjY0MjEgMTMuNzA3IDY2LjQxNiAxMy43OTYxIDY3LjE4MjkgMTMuOTc0MUM2Ny45NjM2IDE0LjEzODQgNjguNjA3MyAxNC4zNzEzIDY5LjExNCAxNC42NzI2TDY4LjA0NTcgMTYuOTUyOUM2Ny4wNzMzIDE2LjQwNTEgNjYuMDExOSAxNi4xMzEyIDY0Ljg2MTUgMTYuMTMxMkM2NC4xNzY3IDE2LjEzMTIgNjMuNjYzMSAxNi4yMjcgNjMuMzIwNyAxNi40MTg4QzYyLjk3ODMgMTYuNjEwNSA2Mi44MDcxIDE2Ljg1NyA2Mi44MDcxIDE3LjE1ODNDNjIuODA3MSAxNy41MDA3IDYyLjk5MiAxNy43NDA0IDYzLjM2MTggMTcuODc3NEM2My43MzE2IDE4LjAxNDMgNjQuMzIwNSAxOC4xNDQ0IDY1LjEyODYgMTguMjY3N0M2Ni4wMzI1IDE4LjQxODMgNjYuNzcyIDE4LjU4MjcgNjcuMzQ3MyAxOC43NjA3QzY3LjkyMjUgMTguOTI1MSA2OC40MjI0IDE5LjIzMzIgNjguODQ2OSAxOS42ODUyQzY5LjI3MTUgMjAuMTM3MiA2OS40ODM4IDIwLjc2NzIgNjkuNDgzOCAyMS41NzUyQzY5LjQ4MzggMjIuMjYgNjkuMjc4NCAyMi44Njk0IDY4Ljg2NzUgMjMuNDAzNkM2OC40NTY2IDIzLjkzNzcgNjcuODU0IDI0LjM1NTQgNjcuMDU5NyAyNC42NTY3QzY2LjI3OSAyNC45NDQzIDY1LjM0NzcgMjUuMDg4MSA2NC4yNjU3IDI1LjA4ODFaIiBmaWxsPSIjMUUxRjI0Ii8+DQo8cGF0aCBkPSJNNzMuOTQ2OSAyNS4wODgxQzczLjAyOTMgMjUuMDg4MSA3Mi4xMzIyIDI0Ljk3ODYgNzEuMjU1NyAyNC43NTk0QzcwLjM3OTEgMjQuNTI2NiA2OS42ODA3IDI0LjIzOSA2OS4xNjAyIDIzLjg5NjZMNzAuMjI4NSAyMS41OTU3QzcwLjcyMTUgMjEuOTEwNyA3MS4zMTczIDIyLjE3MSA3Mi4wMTU4IDIyLjM3NjRDNzIuNzE0MyAyMi41NjgxIDczLjM5OSAyMi42NjQgNzQuMDcwMSAyMi42NjRDNzUuNDI2IDIyLjY2NCA3Ni4xMDM5IDIyLjMyODUgNzYuMTAzOSAyMS42NTc0Qzc2LjEwMzkgMjEuMzQyNCA3NS45MTkgMjEuMTE2NCA3NS41NDkzIDIwLjk3OTRDNzUuMTc5NSAyMC44NDI1IDc0LjYxMTEgMjAuNzI2MSA3My44NDQxIDIwLjYzMDJDNzIuOTQwMiAyMC40OTMyIDcyLjE5MzggMjAuMzM1NyA3MS42MDQ5IDIwLjE1NzdDNzEuMDE2IDE5Ljk3OTcgNzAuNTAyNCAxOS42NjQ3IDcwLjA2NDEgMTkuMjEyN0M2OS42Mzk2IDE4Ljc2MDcgNjkuNDI3MyAxOC4xMTcgNjkuNDI3MyAxNy4yODE2QzY5LjQyNzMgMTYuNTgzMSA2OS42MjU5IDE1Ljk2NjggNzAuMDIzMSAxNS40MzI3QzcwLjQzMzkgMTQuODg0OSA3MS4wMjI4IDE0LjQ2MDMgNzEuNzg5OCAxNC4xNTlDNzIuNTcwNCAxMy44NTc3IDczLjQ4ODEgMTMuNzA3IDc0LjU0MjYgMTMuNzA3Qzc1LjMyMzMgMTMuNzA3IDc2LjA5NzEgMTMuNzk2MSA3Ni44NjQgMTMuOTc0MUM3Ny42NDQ3IDE0LjEzODQgNzguMjg4NCAxNC4zNzEzIDc4Ljc5NTEgMTQuNjcyNkw3Ny43MjY5IDE2Ljk1MjlDNzYuNzU0NSAxNi40MDUxIDc1LjY5MzEgMTYuMTMxMiA3NC41NDI2IDE2LjEzMTJDNzMuODU3OCAxNi4xMzEyIDczLjM0NDMgMTYuMjI3IDczLjAwMTkgMTYuNDE4OEM3Mi42NTk1IDE2LjYxMDUgNzIuNDg4MyAxNi44NTcgNzIuNDg4MyAxNy4xNTgzQzcyLjQ4ODMgMTcuNTAwNyA3Mi42NzMyIDE3Ljc0MDQgNzMuMDQyOSAxNy44Nzc0QzczLjQxMjcgMTguMDE0MyA3NC4wMDE2IDE4LjE0NDQgNzQuODA5NyAxOC4yNjc3Qzc1LjcxMzYgMTguNDE4MyA3Ni40NTMyIDE4LjU4MjcgNzcuMDI4NCAxOC43NjA3Qzc3LjYwMzYgMTguOTI1MSA3OC4xMDM1IDE5LjIzMzIgNzguNTI4MSAxOS42ODUyQzc4Ljk1MjYgMjAuMTM3MiA3OS4xNjQ5IDIwLjc2NzIgNzkuMTY0OSAyMS41NzUyQzc5LjE2NDkgMjIuMjYgNzguOTU5NSAyMi44Njk0IDc4LjU0ODYgMjMuNDAzNkM3OC4xMzc3IDIzLjkzNzcgNzcuNTM1MSAyNC4zNTU0IDc2Ljc0MDggMjQuNjU2N0M3NS45NjAxIDI0Ljk0NDMgNzUuMDI4OCAyNS4wODgxIDczLjk0NjkgMjUuMDg4MVoiIGZpbGw9IiMxRTFGMjQiLz4NCjxwYXRoIGQ9Ik03OS40OTg4IDE3Ljg1NjhIODUuMzEyNlYyMC40MjQ4SDc5LjQ5ODhWMTcuODU2OFoiIGZpbGw9IiMxRTFGMjQiLz4NCjxwYXRoIGQ9Ik05Mi4wNjEzIDI1LjA4ODFDOTAuODk3MSAyNS4wODgxIDg5Ljg0OTQgMjQuODQ4NSA4OC45MTgxIDI0LjM2OTFDODguMDAwNSAyMy44NzYxIDg3LjI4MTUgMjMuMTk4MSA4Ni43NjEgMjIuMzM1M0M4Ni4yNDA2IDIxLjQ3MjUgODUuOTgwNCAyMC40OTMyIDg1Ljk4MDQgMTkuMzk3NkM4NS45ODA0IDE4LjMwMTkgODYuMjQwNiAxNy4zMjI3IDg2Ljc2MSAxNi40NTk5Qzg3LjI4MTUgMTUuNTk3IDg4LjAwMDUgMTQuOTI1OSA4OC45MTgxIDE0LjQ0NjZDODkuODQ5NCAxMy45NTM2IDkwLjg5NzEgMTMuNzA3IDkyLjA2MTMgMTMuNzA3QzkzLjIyNTQgMTMuNzA3IDk0LjI2NjMgMTMuOTUzNiA5NS4xODM5IDE0LjQ0NjZDOTYuMTAxNSAxNC45MjU5IDk2LjgyMDUgMTUuNTk3IDk3LjM0MSAxNi40NTk5Qzk3Ljg2MTQgMTcuMzIyNyA5OC4xMjE2IDE4LjMwMTkgOTguMTIxNiAxOS4zOTc2Qzk4LjEyMTYgMjAuNDkzMiA5Ny44NjE0IDIxLjQ3MjUgOTcuMzQxIDIyLjMzNTNDOTYuODIwNSAyMy4xOTgxIDk2LjEwMTUgMjMuODc2MSA5NS4xODM5IDI0LjM2OTFDOTQuMjY2MyAyNC44NDg1IDkzLjIyNTQgMjUuMDg4MSA5Mi4wNjEzIDI1LjA4ODFaTTkyLjA2MTMgMjIuNDU4NkM5Mi44ODMgMjIuNDU4NiA5My41NTQxIDIyLjE4NDcgOTQuMDc0NSAyMS42MzY4Qzk0LjYwODcgMjEuMDc1MyA5NC44NzU3IDIwLjMyODkgOTQuODc1NyAxOS4zOTc2Qzk0Ljg3NTcgMTguNDY2MyA5NC42MDg3IDE3LjcyNjcgOTQuMDc0NSAxNy4xNzg5QzkzLjU1NDEgMTYuNjE3NCA5Mi44ODMgMTYuMzM2NiA5Mi4wNjEzIDE2LjMzNjZDOTEuMjM5NSAxNi4zMzY2IDkwLjU2MTYgMTYuNjE3NCA5MC4wMjc1IDE3LjE3ODlDODkuNDkzMyAxNy43MjY3IDg5LjIyNjMgMTguNDY2MyA4OS4yMjYzIDE5LjM5NzZDODkuMjI2MyAyMC4zMjg5IDg5LjQ5MzMgMjEuMDc1MyA5MC4wMjc1IDIxLjYzNjhDOTAuNTYxNiAyMi4xODQ3IDkxLjIzOTUgMjIuNDU4NiA5Mi4wNjEzIDIyLjQ1ODZaIiBmaWxsPSIjMUUxRjI0Ii8+DQo8cGF0aCBkPSJNMTA1Ljc0OSAxMy43MDdDMTA3LjExOCAxMy43MDcgMTA4LjIyMSAxNC4xMTc5IDEwOS4wNTYgMTQuOTM5NkMxMDkuOTA2IDE1Ljc2MTQgMTEwLjMzIDE2Ljk4MDMgMTEwLjMzIDE4LjU5NjRWMjQuOTIzOEgxMDcuMTI1VjE5LjA4OTRDMTA3LjEyNSAxOC4yMTI5IDEwNi45MzQgMTcuNTYyNCAxMDYuNTUgMTcuMTM3OEMxMDYuMTY3IDE2LjY5OTUgMTA1LjYxMiAxNi40ODA0IDEwNC44ODYgMTYuNDgwNEMxMDQuMDc4IDE2LjQ4MDQgMTAzLjQzNCAxNi43MzM4IDEwMi45NTUgMTcuMjQwNUMxMDIuNDc2IDE3LjczMzYgMTAyLjIzNiAxOC40NzMxIDEwMi4yMzYgMTkuNDU5MlYyNC45MjM4SDk5LjAzMTFWMTMuODcxNEgxMDIuMDkyVjE1LjE2NTZDMTAyLjUxNyAxNC43IDEwMy4wNDQgMTQuMzQzOSAxMDMuNjc0IDE0LjA5NzRDMTA0LjMwNCAxMy44MzcxIDEwNC45OTYgMTMuNzA3IDEwNS43NDkgMTMuNzA3WiIgZmlsbD0iIzFFMUYyNCIvPg0KPHBhdGggZD0iTTIzLjY3MjEgMTYuMTI3N0MyMi44NTc5IDE2LjEyNzcgMjIuMDU2MyAxNS45ODkzIDIxLjI4ODUgMTUuNzE1OEwyMS4yNjk3IDE1LjcwODlDMjEuMjYwOSAxNS43MDU2IDIxLjI1MjIgMTUuNzAyMyAyMS4yNDM0IDE1LjY5OTNDMjEuMjM4MSAxNS42OTcgMjEuMjMyNSAxNS42OTUgMjEuMjI2OCAxNS42OTI3QzIxLjE1NTcgMTUuNjY3NCAyMS4wODQ3IDE1LjY0MDEgMjEuMDEzMiAxNS42MTEyVjkuMjkxMUMyMS4wMTMyIDYuNzI1ODEgMjAuMDIyOCA0LjQwMjkzIDE4LjQyMjEgMi43MjE0M0MxNi44MjA2IDEuMDM5OTQgMTQuNjA4NCAwIDEyLjE2NDkgMEM3LjI3ODA3IDAgMy4zMTY0OCA0LjE2MDI2IDMuMzE2NDggOS4yOTA4NVYxNS42MTA5QzMuMjQ3NTkgMTUuNjM4OSAzLjE3NTg4IDE1LjY2NjIgMy4xMDA3MiAxNS42OTM4QzMuMDk2NjUgMTUuNjk1MSAzLjA5MjkgMTUuNjk2NCAzLjA4ODgyIDE1LjY5ODRDMy4wNzk3NCAxNS43MDE3IDMuMDcwMzUgMTUuNzA1IDMuMDYwNjQgMTUuNzA4NkwzLjA0MDYgMTUuNzE1NUMyLjI3MzQyIDE1Ljk4OTEgMS40NzE0OSAxNi4xMjc1IDAuNjU3NTg3IDE2LjEyNzVDMC4yOTQ2NjQgMTYuMTI3NSAwIDE2LjQzNjkgMCAxNi44MTc5VjIzLjM3NDdDMCAyNy4wNTgzIDEuNjk4NzQgMzAuNTQzMSA0LjU0NDMgMzIuNjk3NkwxMC44NjE5IDM3LjQ4MDVDMTEuMjUxNyAzNy43NzU1IDExLjcwOCAzNy45MjI4IDEyLjE2NDkgMzcuOTIyOEMxMi42MjE3IDM3LjkyMjggMTMuMDc4IDM3Ljc3NTUgMTMuNDY3OCAzNy40ODA1TDE5Ljc4NTQgMzIuNjk3NkMyMi42MzA5IDMwLjU0MyAyNC4zMjk3IDI3LjA1NzcgMjQuMzI5NyAyMy4zNzQ3TDI0LjMzIDE2LjgxNzlDMjQuMzMgMTYuNDM2NiAyNC4wMzU0IDE2LjEyNzUgMjMuNjcyNSAxNi4xMjc1TDIzLjY3MjEgMTYuMTI3N1pNNi4wNzA5NCA5LjMwNjQ4QzYuMDcwOTQgNS43NzI2MiA4Ljc5OTYyIDIuOTA3NzYgMTIuMTY1IDIuOTA3NzZDMTMuODQ4MSAyLjkwNzc2IDE1LjM3MTUgMy42MjM4OCAxNi40NzQ0IDQuNzgyMjZDMTcuNTc2OSA1LjkzOTk2IDE4LjI1OSA3LjUzOTg5IDE4LjI1OSA5LjMwNjgyVjEzLjY3MjVDMTcuOTE5MiAxMy4yOTM4IDE3LjYxNTggMTIuODc5OCAxNy4zNTUgMTIuNDM3NkMxNy4zNTM3IDEyLjQzNTMgMTcuMzUxOCAxMi40MzMgMTcuMzUwNiAxMi40MzA3QzE3LjM0MjEgMTIuNDE2NSAxNy4zMzQgMTIuNDAyNyAxNy4zMjYyIDEyLjM4ODlMMTcuMzE2MSAxMi4zNzE1QzE3LjMwMzkgMTIuMzQ5OCAxNy4yOTE3IDEyLjMyODcgMTcuMjc4OSAxMi4zMDY3TDE2Ljc3ODggMTEuNDIyOUMxNi42NjAxIDExLjIxMzUgMTYuNDQ1MyAxMS4wODQ5IDE2LjIxMzMgMTEuMDg0OUw4LjExNjc3IDExLjA4NDNDNy44ODQ3NCAxMS4wODQzIDcuNjcwNTUgMTEuMjEyMiA3LjU1MTU1IDExLjQyMTZMNy4wNDc0IDEyLjMxMUM2Ljc2OTMzIDEyLjgwMTUgNi40NDIxIDEzLjI1ODIgNi4wNzA2OSAxMy42NzE1TDYuMDcwOTQgOS4zMDY0OFoiIGZpbGw9IiMwMDQ2RkEiLz4NCjxwYXRoIGQ9Ik0xMi4yMjk5IDE3LjY5NzNDMTAuNTY3MyAxNy42OTczIDguOTcyNTUgMTguMzc5NCA3Ljc5Njk3IDE5LjU5MzdDNi42MjEyMSAyMC44MDc5IDUuOTYwNzUgMjIuNDU0NyA1Ljk2MDc1IDI0LjE3MkM1Ljk2MDc1IDI1Ljg4OTMgNi42MjEyMSAyNy41MzYyIDcuNzk2OTcgMjguNzUwM0M4Ljk3MjYzIDI5Ljk2NDYgMTAuNTY3MiAzMC42NDY3IDEyLjIyOTkgMzAuNjQ2N0MxMy4zMzA0IDMwLjY0NjcgMTQuNDExNSAzMC4zNDc2IDE1LjM2NDUgMjkuNzc5M0MxNi4zMTc2IDI5LjIxMSAxNy4xMDkgMjguMzkzNiAxNy42NTkyIDI3LjQwOTRDMTguMjA5NSAyNi40MjUxIDE4LjQ5OTEgMjUuMzA4NSAxOC40OTkxIDI0LjE3MkMxOC40OTkxIDIyLjQ1NDggMTcuODM4NyAyMC44MDc4IDE2LjY2MjkgMTkuNTkzN0MxNS40ODcyIDE4LjM3OTQgMTMuODkyNyAxNy42OTczIDEyLjIyOTkgMTcuNjk3M1pNMTUuMzExNyAyNC43NDA0TDEyLjkzNiAyNy4xOTM5QzEyLjc0NzQgMjcuMzg4OCAxMi40NzI1IDI3LjQ2NDggMTIuMjE0OCAyNy4zOTM1QzExLjk1NzIgMjcuMzIyMiAxMS43NTYgMjcuMTE0NCAxMS42ODY5IDI2Ljg0ODJDMTEuNjE3OSAyNi41ODIyIDExLjY5MTUgMjYuMjk4MyAxMS44ODAyIDI2LjEwMzRMMTMuMDIxOCAyNC45MzUzSDkuNjc0NjZDOS40MDg2OSAyNC45MzUzIDkuMTYyOTcgMjQuNzg4NyA5LjAyOTk1IDI0LjU1MDhDOC44OTcwMSAyNC4zMTMgOC44OTcwMSAyNC4wMiA5LjAyOTk1IDIzLjc4MjFDOS4xNjI5OCAyMy41NDQyIDkuNDA4NjkgMjMuMzk3NyA5LjY3NDY2IDIzLjM5NzdIMTMuMDA1OEwxMS44ODI2IDIyLjIzNjNDMTEuNjk0IDIyLjA0MTUgMTEuNjIwMyAyMS43NTc2IDExLjY4OTQgMjEuNDkxNkMxMS43NTg0IDIxLjIyNTQgMTEuOTU5NyAyMS4wMTc2IDEyLjIxNzMgMjAuOTQ2M0MxMi40NzUgMjAuODc1IDEyLjc0OTkgMjAuOTUxIDEyLjkzODQgMjEuMTQ1OEwxNS4zMTQxIDIzLjU5OTRDMTUuNDYwMyAyMy43NTA3IDE1LjUzODMgMjMuOTU4NCAxNS41MjkzIDI0LjE3MTlWMjQuMTk2NUMxNS41Mjk3IDI0LjQwMDUgMTUuNDUxMyAyNC41OTYyIDE1LjMxMTUgMjQuNzQwM0wxNS4zMTE3IDI0Ljc0MDRaIiBmaWxsPSJ3aGl0ZSIvPg0KPC9zdmc+DQo=";
  doc.addImage(logoUrl, 'PNG', 360, 15, 60, 20);

  // Section: Labels and Values
  doc.setFontSize(9);
  doc.setTextColor('#A9ACBA'); // Light gray for labels

  const details = [
    { label: 'Author', value: props.details.author, x: 20, y: 80 },
    {
      label: 'Requested',
      value: DateConverter(props.details.requested),
      x: 20,
      y: 100,
    },
    {
      label: 'Recipient',
      value: props.details.recipient,
      x: 20,
      y: 120,
    },
    {
      label: 'Answered',
      value: DateConverter(props.details.answered),
      x: 20,
      y: 220,
    },
  ];

  let toAddY = 0;

  details.forEach(({ label, value, x, y }) => {
    y += toAddY;

    doc.setFontSize(9);
    doc.text(label.toUpperCase(), x, y); // Render label
    doc.setTextColor('#000000'); // Set color to black for value
    const valueLines = value.split('\n');
    const lineSpacing = 20; // Adjust this value to control space between lines
    doc.setFontSize(14); // Reset font size for labels
    valueLines.forEach((line, index) => {
      doc.text(line, x + 100, y + index * lineSpacing); // Adjust y for alignment
    });

    doc.setTextColor('#A9ACBA'); // Reset color for next label

    toAddY += 10;
  });

  doc.setFontSize(16);
  doc.setTextColor('#000000');
  doc.text(`${props.credentials.type} credentials`, 20, 300);

  // const credentials = [
  //     { label: "URL", value: props.credentials.url, y: 330 },
  //     { label: "Login", value: props.credentials.login, y: 360 },
  //     { label: "Password", value: props.credentials.password, y: 390 },
  // ];

  let boxHeight = 0;

  const credentials = Object.entries(
    props.credentials as Record<string, string>,
  )
    .filter(([key]) => key !== 'type') // Exclude "type"
    .map(([key, value], index) => ({
      label: key.replace(/(?:^|\s)\S/g, (a) => a.toUpperCase()), // Capitalize key
      value,
      y: 330 + index * 30, // Calculate y dynamically
    }));

  credentials.forEach(
    ({ label, value, y }: { label: string; value: string; y: number }) => {
      doc.setFontSize(9); // Reset font size for labels
      doc.setTextColor('#A9ACBA');
      doc.text(label.toUpperCase(), 20, y); // Label
      doc.setTextColor('#000000');
      doc.setFontSize(14); // Set font size for value (larger than label)
      doc.text(value, 120, y); // Value
      doc.setTextColor('#A9ACBA');
      doc.setFontSize(9); // Reset font size for labels
      boxHeight += 45;
    },
  );

  console.log(boxHeight);

  // Add credentials box with border only
  doc.setDrawColor('#F2F3F7'); // Light gray border
  doc.roundedRect(10, 270, 410, boxHeight, 5, 5, 'S'); // "S" indicates stroke only (no fill)

  // Footer
  const pageHeight = doc.internal.pageSize.height;
  const footerY = pageHeight - 30; // 30px from the bottom of the page
  doc.setFontSize(9);
  doc.setTextColor('#A9ACBA');
  doc.text('Page 1 of 1', 380, footerY);

  // Save the PDF
  doc.save(`${props.title}-${props.credentials.type}.pdf`);
};
